"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[592],{9231:(f,E,s)=>{s.d(E,{Q:()=>u});var h=s(1474),d=s(7398),l=s(6306),i=s(8504),g=s(4664),o=s(553),n=s(9212);let u=(()=>{class _{constructor(r){this.http=r,this.apiUrl=`${o.N.apiUrl}/banners`,this.adminApiUrl=`${o.N.apiUrl}/admin/banners`}getAllBanners(){return this.http.get(this.apiUrl).pipe((0,d.U)(r=>r.data),(0,l.K)(r=>(console.error("Error al obtener banners",r),(0,i._)(()=>new Error("Error al obtener banners. Por favor, int\xe9ntelo de nuevo.")))))}getAllBannersAdmin(){return this.http.get(this.adminApiUrl).pipe((0,d.U)(r=>r.data),(0,l.K)(r=>(console.error("Error al obtener banners administrativos",r),(0,i._)(()=>new Error("Error al obtener los banners. Por favor, int\xe9ntelo de nuevo.")))))}getBannerById(r){return this.http.get(`${this.apiUrl}/${r}`).pipe((0,d.U)(t=>t.data),(0,l.K)(t=>(console.error(`Error al obtener banner con ID ${r}`,t),(0,i._)(()=>new Error("Error al obtener el banner. Por favor, int\xe9ntelo de nuevo.")))))}createBanner(r,t){const a=new FormData;void 0!==r.titulo&&a.append("titulo",r.titulo),void 0!==r.descripcion&&a.append("descripcion",r.descripcion),void 0!==r.texto_boton&&a.append("texto_boton",r.texto_boton),void 0!==r.enlace_boton&&a.append("enlace_boton",r.enlace_boton),void 0!==r.orden&&a.append("orden",String(r.orden)),void 0!==r.activo&&a.append("activo",r.activo?"1":"0"),t instanceof File?(a.append("imagen",t,t.name),console.log("Enviando imagen:",t.name,t.type,t.size)):console.error("La imagen no es un archivo v\xe1lido"),console.log("Campos enviados:"),a.forEach((e,c)=>{console.log(`${c}: ${e}`)});const p=new h.WM;return this.http.post(this.apiUrl,a,{headers:p}).pipe((0,d.U)(e=>e.data),(0,l.K)(e=>(console.error("Error al crear el banner",e),e.error&&e.error.errors&&console.error("Detalles de validaci\xf3n:",e.error.errors),(0,i._)(()=>new Error("Error al crear el banner. Por favor, int\xe9ntelo de nuevo.")))))}updateBanner(r,t,a){if(1===Object.keys(t).length&&"activo"in t)return this.getBannerById(r).pipe((0,g.w)(e=>{const c=new FormData;return c.append("activo",t.activo?"1":"0"),c.append("titulo",e.titulo),c.append("descripcion",e.descripcion||""),c.append("texto_boton",e.texto_boton),c.append("enlace_boton",e.enlace_boton),c.append("orden",String(e.orden)),this.http.post(`${this.adminApiUrl}/${r}`,c).pipe((0,d.U)(v=>v.data),(0,l.K)(v=>(console.error(`Error al actualizar banner con ID ${r}`,v),(0,i._)(()=>new Error("Error al actualizar el banner. Por favor, int\xe9ntelo de nuevo.")))))}),(0,l.K)(e=>(console.error(`Error al obtener banner para actualizar con ID ${r}`,e),(0,i._)(()=>new Error("Error al actualizar el banner. No se pudo obtener la informaci\xf3n completa.")))));const p=new FormData;return Object.keys(t).forEach(e=>{void 0!==t[e]&&p.append(e,"activo"===e&&"boolean"==typeof t[e]?t[e]?"1":"0":String(t[e]))}),a&&p.append("imagen",a,a.name),this.http.post(`${this.adminApiUrl}/${r}`,p).pipe((0,d.U)(e=>e.data),(0,l.K)(e=>(console.error(`Error al actualizar banner con ID ${r}`,e),(0,i._)(()=>new Error("Error al actualizar el banner. Por favor, int\xe9ntelo de nuevo.")))))}deleteBanner(r){return this.http.delete(`${this.apiUrl}/${r}`).pipe((0,l.K)(t=>(console.error(`Error al eliminar banner con ID ${r}`,t),(0,i._)(()=>new Error("Error al eliminar el banner. Por favor, int\xe9ntelo de nuevo.")))))}toggleActivo(r,t){const a=new FormData;return a.append("activo",t?"1":"0"),this.http.post(`${this.adminApiUrl}/${r}`,a).pipe((0,d.U)(p=>p.data),(0,l.K)(p=>(console.error(`Error al cambiar estado del banner con ID ${r}`,p),(0,i._)(()=>new Error("Error al cambiar el estado del banner. Por favor, int\xe9ntelo de nuevo.")))))}static#r=this.\u0275fac=function(t){return new(t||_)(n.LFG(h.eN))};static#e=this.\u0275prov=n.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},1699:(f,E,s)=>{s.d(E,{$:()=>l});var h=s(9212),d=s(2958);let l=(()=>{class i{constructor(){this.apiService=(0,h.f3M)(d.s),this.endpoint="digital-cards"}getDigitalCards(o){const n=new URLSearchParams;o?.page&&n.set("page",o.page.toString()),o?.search&&n.set("search",o.search),o?.per_page&&n.set("per_page",o.per_page.toString());const u=n.toString()?`${this.endpoint}?${n}`:this.endpoint;return this.apiService.get(u)}getDigitalCard(o){return this.apiService.get(`${this.endpoint}/${o}`)}createDigitalCard(o){return this.apiService.post(this.endpoint,o)}updateDigitalCard(o,n){return this.apiService.post(`${this.endpoint}/${o}/update`,n)}deleteDigitalCard(o){return this.apiService.delete(`${this.endpoint}/${o}`)}uploadImage(o,n){const u=new FormData;return u.append("image",n),this.apiService.post(`${this.endpoint}/${o}/upload-image`,u)}deleteImage(o){return this.apiService.delete(`${this.endpoint}/${o}/delete-image`)}toggleStatus(o,n){return this.apiService.post(`${this.endpoint}/${o}/toggle-status`,n)}static#r=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()}}]);