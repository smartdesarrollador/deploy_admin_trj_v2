"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[656],{1656:(de,p,c)=>{c.r(p),c.d(p,{TarjetaCreateComponent:()=>ce});var e=c(9212),d=c(6814),a=c(6223),g=c(7890),m=c(1699),f=c(3477);function _(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t)}}function x(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",29),e._UZ(1,"path",30),e.qZA())}const v=(n,o)=>({"bg-green-500":n,"bg-gray-300":o});function h(n,o){if(1&n&&e._UZ(0,"div",31),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("ngClass",e.WLB(1,v,i.isStepCompleted(t),!i.isStepCompleted(t)))}}const b=(n,o,t)=>({"bg-blue-600":n,"bg-green-500":o,"bg-gray-300":t}),C=(n,o,t)=>({"text-blue-600":n,"text-green-600":o,"text-gray-500":t});function T(n,o){if(1&n&&(e.TgZ(0,"div",22)(1,"div",22)(2,"div",23),e.YNc(3,_,2,1,"span",24)(4,x,2,0,"svg",25),e.qZA(),e.TgZ(5,"div",26)(6,"p",27),e._uU(7),e.qZA()()(),e.YNc(8,h,1,4,"div",28),e.qZA()),2&n){const t=o.$implicit,i=o.index,r=e.oxw();e.xp6(2),e.Q6J("ngClass",e.kEZ(6,b,r.currentStep===t,r.isStepCompleted(t)&&r.currentStep!==t,!r.isStepCompleted(t)&&r.currentStep!==t)),e.xp6(1),e.Q6J("ngIf",!r.isStepCompleted(t)||r.currentStep===t),e.xp6(1),e.Q6J("ngIf",r.isStepCompleted(t)&&r.currentStep!==t),e.xp6(2),e.Q6J("ngClass",e.kEZ(10,C,r.currentStep===t,r.isStepCompleted(t)&&r.currentStep!==t,!r.isStepCompleted(t)&&r.currentStep!==t)),e.xp6(1),e.hij(" ",r.getStepTitle(t)," "),e.xp6(1),e.Q6J("ngIf",i<3)}}function Z(n,o){if(1&n&&(e.TgZ(0,"div",32)(1,"div",33),e.O4$(),e.TgZ(2,"svg",34),e._UZ(3,"path",35),e.qZA(),e.kcU(),e.TgZ(4,"span"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.successMessage())}}function w(n,o){if(1&n&&(e.TgZ(0,"div",36)(1,"div",33),e.O4$(),e.TgZ(2,"svg",37),e._UZ(3,"path",38),e.qZA(),e.kcU(),e.TgZ(4,"span"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.errorMessage())}}function y(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function I(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,y,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("personalInfo","name"))}}function A(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function k(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,A,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("personalInfo","title"))}}function q(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function j(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,q,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("personalInfo","location"))}}function O(n,o){if(1&n&&e._UZ(0,"img",63),2&n){const t=e.oxw(2);e.Q6J("src",t.previewImagen,e.LSH)}}function U(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",64),e._UZ(1,"path",65),e.qZA())}const l=(n,o)=>({"border-red-500":n,"border-gray-300":o});function M(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40)(2,"h2",41),e._uU(3,"Informaci\xf3n Personal"),e.qZA(),e.TgZ(4,"p",42),e._uU(5,"Informaci\xf3n b\xe1sica de la tarjeta digital"),e.qZA()(),e.TgZ(6,"div",43)(7,"label",44),e._uU(8," Nombre Completo "),e.TgZ(9,"span",45),e._uU(10,"*"),e.qZA()(),e._UZ(11,"input",46),e.YNc(12,I,2,1,"div",47),e.qZA(),e.TgZ(13,"div",43)(14,"label",48),e._uU(15," T\xedtulo o Cargo "),e.qZA(),e._UZ(16,"input",49),e.YNc(17,k,2,1,"div",47),e.qZA(),e.TgZ(18,"div",43)(19,"label",50),e._uU(20," Ubicaci\xf3n "),e.qZA(),e._UZ(21,"input",51),e.YNc(22,j,2,1,"div",47),e.qZA(),e.TgZ(23,"div",43)(24,"label",52),e._uU(25,"Foto de Perfil"),e.qZA(),e.TgZ(26,"div",53)(27,"div",54)(28,"div",55),e.YNc(29,O,1,1,"img",56)(30,U,2,0,"svg",57),e.qZA()(),e.TgZ(31,"div")(32,"input",58),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onFileChange(r))}),e.qZA(),e.TgZ(33,"label",59),e._uU(34," Seleccionar imagen "),e.qZA(),e.TgZ(35,"p",60),e._uU(36,"PNG, JPG hasta 2MB"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngClass",e.WLB(8,l,t.esInvalido("personalInfo","name"),!t.esInvalido("personalInfo","name"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("personalInfo","name")),e.xp6(4),e.Q6J("ngClass",e.WLB(11,l,t.esInvalido("personalInfo","title"),!t.esInvalido("personalInfo","title"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("personalInfo","title")),e.xp6(4),e.Q6J("ngClass",e.WLB(14,l,t.esInvalido("personalInfo","location"),!t.esInvalido("personalInfo","location"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("personalInfo","location")),e.xp6(7),e.Q6J("ngIf",t.previewImagen),e.xp6(1),e.Q6J("ngIf",!t.previewImagen)}}function S(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function J(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,S,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","email"))}}function N(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function P(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,N,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","phone"))}}function Q(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function F(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,Q,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","website"))}}function E(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function L(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,E,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","whatsapp"))}}function Y(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function $(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,Y,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","linkedin"))}}function B(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function D(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,B,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","twitter"))}}function W(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function G(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,W,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","instagram"))}}function V(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function z(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,V,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("contact","github"))}}function H(n,o){if(1&n&&(e.TgZ(0,"div",66)(1,"div",40)(2,"h2",41),e._uU(3,"Informaci\xf3n de Contacto"),e.qZA(),e.TgZ(4,"p",42),e._uU(5,"Agrega tus m\xe9todos de contacto y redes sociales"),e.qZA()(),e.TgZ(6,"div",67)(7,"div",43)(8,"label",68),e._uU(9,"Email"),e.qZA(),e._UZ(10,"input",69),e.YNc(11,J,2,1,"div",47),e.qZA(),e.TgZ(12,"div",43)(13,"label",70),e._uU(14,"Tel\xe9fono"),e.qZA(),e._UZ(15,"input",71),e.YNc(16,P,2,1,"div",47),e.qZA(),e.TgZ(17,"div",43)(18,"label",72),e._uU(19,"Sitio Web"),e.qZA(),e._UZ(20,"input",73),e.YNc(21,F,2,1,"div",47),e.qZA(),e.TgZ(22,"div",43)(23,"label",74),e._uU(24,"WhatsApp"),e.qZA(),e._UZ(25,"input",75),e.YNc(26,L,2,1,"div",47),e.qZA(),e.TgZ(27,"div",43)(28,"label",76),e._uU(29,"LinkedIn"),e.qZA(),e._UZ(30,"input",77),e.YNc(31,$,2,1,"div",47),e.qZA(),e.TgZ(32,"div",43)(33,"label",78),e._uU(34,"Twitter"),e.qZA(),e._UZ(35,"input",79),e.YNc(36,D,2,1,"div",47),e.qZA(),e.TgZ(37,"div",43)(38,"label",80),e._uU(39,"Instagram"),e.qZA(),e._UZ(40,"input",81),e.YNc(41,G,2,1,"div",47),e.qZA(),e.TgZ(42,"div",43)(43,"label",82),e._uU(44,"GitHub"),e.qZA(),e._UZ(45,"input",83),e.YNc(46,z,2,1,"div",47),e.qZA()()()),2&n){const t=e.oxw();e.xp6(10),e.Q6J("ngClass",e.WLB(16,l,t.esInvalido("contact","email"),!t.esInvalido("contact","email"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","email")),e.xp6(4),e.Q6J("ngClass",e.WLB(19,l,t.esInvalido("contact","phone"),!t.esInvalido("contact","phone"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","phone")),e.xp6(4),e.Q6J("ngClass",e.WLB(22,l,t.esInvalido("contact","website"),!t.esInvalido("contact","website"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","website")),e.xp6(4),e.Q6J("ngClass",e.WLB(25,l,t.esInvalido("contact","whatsapp"),!t.esInvalido("contact","whatsapp"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","whatsapp")),e.xp6(4),e.Q6J("ngClass",e.WLB(28,l,t.esInvalido("contact","linkedin"),!t.esInvalido("contact","linkedin"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","linkedin")),e.xp6(4),e.Q6J("ngClass",e.WLB(31,l,t.esInvalido("contact","twitter"),!t.esInvalido("contact","twitter"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","twitter")),e.xp6(4),e.Q6J("ngClass",e.WLB(34,l,t.esInvalido("contact","instagram"),!t.esInvalido("contact","instagram"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","instagram")),e.xp6(4),e.Q6J("ngClass",e.WLB(37,l,t.esInvalido("contact","github"),!t.esInvalido("contact","github"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("contact","github"))}}function K(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function R(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,K,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("about","description"))}}function X(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",94),e._UZ(1,"input",95),e.TgZ(2,"button",96),e.NdJ("click",function(){const s=e.CHM(t).index,u=e.oxw(2);return e.KtG(u.removeSkill(s))}),e.O4$(),e.TgZ(3,"svg",90),e._UZ(4,"path",97),e.qZA()()()}if(2&n){const t=o.index;e.xp6(1),e.Q6J("formControlName",t)}}function ee(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function te(n,o){if(1&n&&(e.TgZ(0,"div",61),e.YNc(1,ee,2,1,"p",62),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.obtenerErrores("about","experience"))}}function ne(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",84)(1,"div",40)(2,"h2",41),e._uU(3,"Acerca de"),e.qZA(),e.TgZ(4,"p",42),e._uU(5,"Informaci\xf3n adicional sobre tu perfil profesional"),e.qZA()(),e.TgZ(6,"div",43)(7,"label",85),e._uU(8,"Descripci\xf3n"),e.qZA(),e._UZ(9,"textarea",86),e.YNc(10,R,2,1,"div",47),e.qZA(),e.TgZ(11,"div",43)(12,"label",52),e._uU(13,"Habilidades"),e.qZA(),e.TgZ(14,"div",87),e.YNc(15,X,5,1,"div",88),e.TgZ(16,"button",89),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addSkill())}),e.O4$(),e.TgZ(17,"svg",90),e._UZ(18,"path",91),e.qZA(),e.kcU(),e.TgZ(19,"span"),e._uU(20,"Agregar habilidad"),e.qZA()()()(),e.TgZ(21,"div",43)(22,"label",92),e._uU(23,"A\xf1os de Experiencia"),e.qZA(),e._UZ(24,"input",93),e.YNc(25,te,2,1,"div",47),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngClass",e.WLB(5,l,t.esInvalido("about","description"),!t.esInvalido("about","description"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("about","description")),e.xp6(5),e.Q6J("ngForOf",t.skillsArray.controls),e.xp6(9),e.Q6J("ngClass",e.WLB(8,l,t.esInvalido("about","experience"),!t.esInvalido("about","experience"))),e.xp6(1),e.Q6J("ngIf",t.esInvalido("about","experience"))}}function oe(n,o){1&n&&(e.TgZ(0,"div",98)(1,"div",40)(2,"h2",41),e._uU(3,"Configuraci\xf3n"),e.qZA(),e.TgZ(4,"p",42),e._uU(5,"Configura la visibilidad y estado de tu tarjeta digital"),e.qZA()(),e.TgZ(6,"div",99)(7,"div",100)(8,"div")(9,"h3",101),e._uU(10,"Estado Activo"),e.qZA(),e.TgZ(11,"p",102),e._uU(12,"La tarjeta est\xe1 activa y funcional"),e.qZA()(),e.TgZ(13,"label",103),e._UZ(14,"input",104)(15,"div",105),e.qZA()(),e.TgZ(16,"div",100)(17,"div")(18,"h3",101),e._uU(19,"Visibilidad P\xfablica"),e.qZA(),e.TgZ(20,"p",102),e._uU(21,"La tarjeta ser\xe1 visible p\xfablicamente"),e.qZA()(),e.TgZ(22,"label",103),e._UZ(23,"input",106)(24,"div",105),e.qZA()()()())}function re(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",107),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.nextStep())}),e._uU(1," Siguiente "),e.qZA()}}function ie(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"Crear Tarjeta"),e.qZA())}function ae(n,o){1&n&&(e.TgZ(0,"span",22),e.O4$(),e.TgZ(1,"svg",110),e._UZ(2,"circle",111)(3,"path",112),e.qZA(),e._uU(4," Creando... "),e.qZA())}function se(n,o){if(1&n&&(e.TgZ(0,"button",108),e.YNc(1,ie,2,0,"span",24)(2,ae,5,0,"span",109),e.qZA()),2&n){const t=e.oxw();e.Q6J("disabled",t.isLoading()),e.xp6(1),e.Q6J("ngIf",!t.isLoading()),e.xp6(1),e.Q6J("ngIf",t.isLoading())}}const le=()=>[1,2,3,4];let ce=(()=>{class n{constructor(){this.fb=(0,e.f3M)(a.qu),this.router=(0,e.f3M)(g.F0),this.digitalCardsService=(0,e.f3M)(m.$),this.notificationService=(0,e.f3M)(f.g),this.isLoading=(0,e.tdS)(!1),this.errorMessage=(0,e.tdS)(null),this.successMessage=(0,e.tdS)(null),this.imagenSeleccionada=null,this.previewImagen=null,this.currentStep=1,this.totalSteps=4}ngOnInit(){this.inicializarFormulario()}inicializarFormulario(){this.tarjetaForm=this.fb.group({personalInfo:this.fb.group({name:["",[a.kI.required,a.kI.maxLength(255)]],title:["",[a.kI.maxLength(255)]],location:["",[a.kI.maxLength(255)]],photo:[""]}),contact:this.fb.group({email:["",[a.kI.email,a.kI.maxLength(255)]],phone:["",[a.kI.maxLength(20)]],website:["",[this.urlValidator]],linkedin:["",[this.urlValidator]],twitter:["",[this.urlValidator]],instagram:["",[this.urlValidator]],github:["",[this.urlValidator]],youtube:["",[this.urlValidator]],tiktok:["",[this.urlValidator]],whatsapp:["",[a.kI.maxLength(20)]],facebook:["",[this.urlValidator]]}),about:this.fb.group({description:["",[a.kI.maxLength(1e3)]],skills:this.fb.array([]),experience:[0,[a.kI.min(0),a.kI.max(50)]]}),settings:this.fb.group({is_active:[!0],is_public:[!0]})})}urlValidator(t){return t.value?/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(t.value)?null:{invalidUrl:!0}:null}get skillsArray(){return this.tarjetaForm.get("about.skills")}addSkill(){this.skillsArray.push(this.fb.control("",[a.kI.required,a.kI.maxLength(50)]))}removeSkill(t){this.skillsArray.removeAt(t)}onFileChange(t){const i=t.target;if(i.files&&i.files.length){const r=i.files[0];if(!r.type.startsWith("image/"))return void this.notificationService.error("Archivo inv\xe1lido","Por favor seleccione un archivo de imagen v\xe1lido.");if(r.size>2097152)return void this.notificationService.error("Archivo muy grande","La imagen no debe superar los 2MB.");this.imagenSeleccionada=r,this.errorMessage.set(null);const s=new FileReader;s.onload=()=>{this.previewImagen=s.result},s.readAsDataURL(r)}}nextStep(){this.currentStep<this.totalSteps&&this.validateCurrentStep()&&this.currentStep++}previousStep(){this.currentStep>1&&this.currentStep--}goToStep(t){this.currentStep=t}validateCurrentStep(){switch(this.currentStep){case 1:const t=this.tarjetaForm.get("personalInfo");if(t)return t.markAllAsTouched(),t.valid;break;case 2:case 3:case 4:return!0}return!1}onSubmit(){if(this.tarjetaForm.invalid)return this.markAllGroupsAsTouched(),void this.notificationService.validationError();this.isLoading.set(!0),this.errorMessage.set(null);const t=this.tarjetaForm.value,i={personalInfo:{name:t.personalInfo.name,title:t.personalInfo.title||void 0,location:t.personalInfo.location||void 0},contact:this.hasContactData()?t.contact:void 0,about:this.hasAboutData()?{...t.about,skills:this.skillsArray.value.filter(s=>""!==s.trim())}:void 0,is_active:t.settings.is_active,is_public:t.settings.is_public},r=t.personalInfo.name||"Nueva tarjeta";this.digitalCardsService.createDigitalCard(i).subscribe({next:s=>{this.isLoading.set(!1),this.notificationService.cardCreated(r),this.imagenSeleccionada&&s.data.id?this.uploadImage(s.data.id):setTimeout(()=>{this.router.navigate(["/admin/tarjetas"])},2e3)},error:s=>{this.isLoading.set(!1),this.notificationService.handleApiError(s,"crear la tarjeta digital"),console.error("Error al crear tarjeta:",s)}})}uploadImage(t){console.log("uploadImage called with cardId:",t),console.log("imagenSeleccionada:",this.imagenSeleccionada),this.imagenSeleccionada?(console.log("Iniciando subida de imagen..."),this.digitalCardsService.uploadImage(t,this.imagenSeleccionada).subscribe({next:()=>{this.notificationService.imageUploaded(),setTimeout(()=>{this.router.navigate(["/admin/tarjetas"])},2e3)},error:i=>{console.error("Error al subir imagen:",i),this.notificationService.imageUploadError("No se pudo subir la imagen, pero la tarjeta se cre\xf3 exitosamente."),setTimeout(()=>{this.router.navigate(["/admin/tarjetas"])},2e3)}})):console.log("No hay imagen seleccionada")}hasContactData(){const t=this.tarjetaForm.get("contact")?.value;return Object.values(t).some(i=>i&&""!==i.trim())}hasAboutData(){const t=this.tarjetaForm.get("about")?.value;return t.description?.trim()||this.skillsArray.length>0||t.experience>0}markAllGroupsAsTouched(){this.tarjetaForm.get("personalInfo")?.markAllAsTouched(),this.tarjetaForm.get("contact")?.markAllAsTouched(),this.tarjetaForm.get("about")?.markAllAsTouched(),this.tarjetaForm.get("settings")?.markAllAsTouched()}cancelar(){this.router.navigate(["/admin/tarjetas"])}esInvalido(t,i){const r=this.tarjetaForm.get(`${t}.${i}`);return!!r&&r.invalid&&(r.dirty||r.touched)}obtenerErrores(t,i){const r=this.tarjetaForm.get(`${t}.${i}`),s=[];return r&&r.errors&&(r.dirty||r.touched)?(r.errors.required&&s.push("Este campo es obligatorio."),r.errors.maxlength&&s.push(`M\xe1ximo ${r.errors.maxlength.requiredLength} caracteres permitidos.`),r.errors.email&&s.push("Ingrese un email v\xe1lido."),r.errors.invalidUrl&&s.push("Ingrese una URL v\xe1lida."),r.errors.min&&s.push(`El valor m\xednimo es ${r.errors.min.min}.`),r.errors.max&&s.push(`El valor m\xe1ximo es ${r.errors.max.max}.`),s):s}getStepTitle(t){switch(t){case 1:return"Informaci\xf3n Personal";case 2:return"Informaci\xf3n de Contacto";case 3:return"Acerca de";case 4:return"Configuraci\xf3n";default:return""}}isStepCompleted(t){switch(t){case 1:const i=this.tarjetaForm.get("personalInfo");return!!i&&i.valid;case 2:case 3:case 4:return!0;default:return!1}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-tarjeta-create"]],standalone:!0,features:[e.jDz],decls:25,vars:12,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["type","button",1,"bg-gray-200","hover:bg-gray-300","text-gray-700","font-medium","py-2","px-4","rounded-md","flex","items-center","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"mb-8"],[1,"flex","items-center","justify-between"],["class","flex items-center",4,"ngFor","ngForOf"],["class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],[3,"formGroup","ngSubmit"],["class","space-y-6","formGroupName","personalInfo",4,"ngIf"],["class","space-y-6","formGroupName","contact",4,"ngIf"],["class","space-y-6","formGroupName","about",4,"ngIf"],["class","space-y-6","formGroupName","settings",4,"ngIf"],[1,"flex","justify-between","items-center","pt-6","border-t","border-gray-200"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","click"],[1,"flex","space-x-3"],["type","button","class","px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",3,"click",4,"ngIf"],["type","submit","class","px-6 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled",4,"ngIf"],[1,"flex","items-center"],[1,"flex","items-center","justify-center","w-10","h-10","rounded-full","text-white","font-medium","transition-colors",3,"ngClass"],[4,"ngIf"],["class","w-5 h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"ml-3","hidden","sm:block"],[1,"text-sm","font-medium",3,"ngClass"],["class","hidden md:block w-20 h-1 mx-4 rounded-full",3,"ngClass",4,"ngIf"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"hidden","md:block","w-20","h-1","mx-4","rounded-full",3,"ngClass"],[1,"bg-green-100","border","border-green-400","text-green-700","px-4","py-3","rounded","mb-4"],[1,"flex"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["formGroupName","personalInfo",1,"space-y-6"],[1,"border-b","border-gray-200","pb-4","mb-6"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-sm","text-gray-600"],[1,"space-y-2"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],[1,"text-red-500"],["type","text","id","name","formControlName","name","placeholder","Ej: Juan Carlos P\xe9rez",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["class","text-sm text-red-600 mt-1",4,"ngIf"],["for","title",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","title","formControlName","title","placeholder","Ej: Desarrollador Full Stack, CEO, Designer",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","location",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","location","formControlName","location","placeholder","Ej: Madrid, Espa\xf1a",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"flex","items-center","space-x-4"],[1,"flex-shrink-0"],[1,"w-20","h-20","rounded-full","overflow-hidden","bg-gray-200","flex","items-center","justify-center"],["alt","Preview","class","w-full h-full object-cover",3,"src",4,"ngIf"],["class","w-8 h-8 text-gray-400","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["type","file","id","photo","accept","image/*",1,"hidden",3,"change"],["for","photo",1,"bg-white","py-2","px-3","border","border-gray-300","rounded-md","shadow-sm","text-sm","leading-4","font-medium","text-gray-700","hover:bg-gray-50","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-blue-500","cursor-pointer"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-sm","text-red-600","mt-1"],[4,"ngFor","ngForOf"],["alt","Preview",1,"w-full","h-full","object-cover",3,"src"],["fill","currentColor","viewBox","0 0 20 20",1,"w-8","h-8","text-gray-400"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],["formGroupName","contact",1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","formControlName","email","placeholder","ejemplo@correo.com",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","phone",1,"block","text-sm","font-medium","text-gray-700"],["type","tel","id","phone","formControlName","phone","placeholder","+34 123 456 789",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","website",1,"block","text-sm","font-medium","text-gray-700"],["type","url","id","website","formControlName","website","placeholder","https://misitio.com",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","whatsapp",1,"block","text-sm","font-medium","text-gray-700"],["type","tel","id","whatsapp","formControlName","whatsapp","placeholder","+34 123 456 789",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","linkedin",1,"block","text-sm","font-medium","text-gray-700"],["type","url","id","linkedin","formControlName","linkedin","placeholder","https://linkedin.com/in/usuario",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","twitter",1,"block","text-sm","font-medium","text-gray-700"],["type","url","id","twitter","formControlName","twitter","placeholder","https://twitter.com/usuario",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","instagram",1,"block","text-sm","font-medium","text-gray-700"],["type","url","id","instagram","formControlName","instagram","placeholder","https://instagram.com/usuario",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","github",1,"block","text-sm","font-medium","text-gray-700"],["type","url","id","github","formControlName","github","placeholder","https://github.com/usuario",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["formGroupName","about",1,"space-y-6"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","formControlName","description","rows","4","placeholder","Describe brevemente tu experiencia, objetivos o lo que te define profesionalmente...",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["formArrayName","skills",1,"space-y-3"],["class","flex items-center space-x-2",4,"ngFor","ngForOf"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","bg-gray-100","text-gray-700","rounded-md","hover:bg-gray-200","transition-colors",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],["for","experience",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","experience","formControlName","experience","min","0","max","50","placeholder","0",1,"w-32","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],[1,"flex","items-center","space-x-2"],["type","text","placeholder","Ej: JavaScript, Design Thinking, Marketing Digital",1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"formControlName"],["type","button",1,"flex-shrink-0","w-8","h-8","bg-red-100","text-red-600","rounded-full","hover:bg-red-200","flex","items-center","justify-center",3,"click"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["formGroupName","settings",1,"space-y-6"],[1,"space-y-4"],[1,"flex","items-center","justify-between","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","is_active",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600"],["type","checkbox","formControlName","is_public",1,"sr-only","peer"],["type","button",1,"px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["type","submit",1,"px-6","py-2","bg-green-600","text-white","text-sm","font-medium","rounded-md","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","flex items-center",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"Crear Nueva Tarjeta Digital"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return r.cancelar()}),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"path",6),e.qZA(),e._uU(8," Volver "),e.qZA()(),e.kcU(),e.TgZ(9,"div",7)(10,"div",8),e.YNc(11,T,9,14,"div",9),e.qZA()(),e.YNc(12,Z,6,1,"div",10)(13,w,6,1,"div",11),e.TgZ(14,"form",12),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.YNc(15,M,37,17,"div",13)(16,H,47,40,"div",14)(17,ne,26,11,"div",15)(18,oe,25,0,"div",16),e.TgZ(19,"div",17)(20,"button",18),e.NdJ("click",function(){return r.previousStep()}),e._uU(21," Anterior "),e.qZA(),e.TgZ(22,"div",19),e.YNc(23,re,2,0,"button",20)(24,se,3,3,"button",21),e.qZA()()()()()),2&i&&(e.xp6(11),e.Q6J("ngForOf",e.DdM(11,le)),e.xp6(1),e.Q6J("ngIf",r.successMessage()),e.xp6(1),e.Q6J("ngIf",r.errorMessage()),e.xp6(1),e.Q6J("formGroup",r.tarjetaForm),e.xp6(1),e.Q6J("ngIf",1===r.currentStep),e.xp6(1),e.Q6J("ngIf",2===r.currentStep),e.xp6(1),e.Q6J("ngIf",3===r.currentStep),e.xp6(1),e.Q6J("ngIf",4===r.currentStep),e.xp6(2),e.Q6J("disabled",1===r.currentStep),e.xp6(3),e.Q6J("ngIf",r.currentStep<r.totalSteps),e.xp6(1),e.Q6J("ngIf",r.currentStep===r.totalSteps))},dependencies:[d.ez,d.mk,d.sg,d.O5,a.UX,a._Y,a.Fj,a.wV,a.Wl,a.JJ,a.JL,a.qQ,a.Fd,a.sg,a.u,a.x0,a.CE],styles:[".step-transition[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.step-indicator[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.step-indicator.active[_ngcontent-%COMP%]{transform:scale(1.1)}.form-field-container[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-field-container[_ngcontent-%COMP%]:focus-within{transform:translateY(-1px)}.image-preview-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;transition:all .2s ease-in-out}.image-preview-container[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.toggle-switch[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.peer[_ngcontent-%COMP%]:focus ~ .toggle-switch[_ngcontent-%COMP%]{box-shadow:0 0 0 3px #3b82f61a}.skill-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.skill-item[_ngcontent-%COMP%]:hover{background-color:#f3f4f680}.skill-remove-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.skill-remove-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.button-loading[_ngcontent-%COMP%]{position:relative;overflow:hidden}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.step-content[_ngcontent-%COMP%]{padding:1rem .5rem}.grid-responsive[_ngcontent-%COMP%]{grid-template-columns:1fr}.step-indicator-mobile[_ngcontent-%COMP%]{display:block}.step-indicator-desktop[_ngcontent-%COMP%]{display:none}}@media (min-width: 769px){.step-indicator-mobile[_ngcontent-%COMP%]{display:none}.step-indicator-desktop[_ngcontent-%COMP%]{display:block}}.form-section[_ngcontent-%COMP%]{padding:1.5rem;border-radius:.5rem;background:linear-gradient(to right,rgba(249,250,251,.8),rgba(255,255,255,.8));border:1px solid rgba(229,231,235,.8)}.validation-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.validation-success[_ngcontent-%COMP%]{color:#10b981}.validation-error[_ngcontent-%COMP%]{color:#ef4444}.focus\\:ring-2[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 2px #3b82f680}.success-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromTop .3s ease-out}.error-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s ease-in-out}@keyframes _ngcontent-%COMP%_slideInFromTop{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.shadow-soft[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.shadow-medium[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.main-container[_ngcontent-%COMP%]{max-width:4xl;margin:0 auto;padding:2rem 1rem}.text-muted[_ngcontent-%COMP%]{color:#6b7280}.text-emphasis[_ngcontent-%COMP%]{color:#374151;font-weight:500}.collapsible-section[_ngcontent-%COMP%]{overflow:hidden;transition:max-height .3s ease-in-out}.collapsible-section.collapsed[_ngcontent-%COMP%]{max-height:0}.collapsible-section.expanded[_ngcontent-%COMP%]{max-height:1000px}"]})}return n})()}}]);