"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[592],{9231:(f,v,s)=>{s.d(v,{Q:()=>u});var _=s(1474),p=s(7398),l=s(6306),a=s(8504),g=s(4664),r=s(553),n=s(9212);let u=(()=>{class h{constructor(e){this.http=e,this.apiUrl=`${r.N.apiUrl}/banners`,this.adminApiUrl=`${r.N.apiUrl}/admin/banners`}getAllBanners(){return this.http.get(this.apiUrl).pipe((0,p.U)(e=>e.data),(0,l.K)(e=>(console.error("Error al obtener banners",e),(0,a._)(()=>new Error("Error al obtener banners. Por favor, int\xe9ntelo de nuevo.")))))}getAllBannersAdmin(){return this.http.get(this.adminApiUrl).pipe((0,p.U)(e=>e.data),(0,l.K)(e=>(console.error("Error al obtener banners administrativos",e),(0,a._)(()=>new Error("Error al obtener los banners. Por favor, int\xe9ntelo de nuevo.")))))}getBannerById(e){return this.http.get(`${this.apiUrl}/${e}`).pipe((0,p.U)(o=>o.data),(0,l.K)(o=>(console.error(`Error al obtener banner con ID ${e}`,o),(0,a._)(()=>new Error("Error al obtener el banner. Por favor, int\xe9ntelo de nuevo.")))))}createBanner(e,o){const i=new FormData;void 0!==e.titulo&&i.append("titulo",e.titulo),void 0!==e.descripcion&&i.append("descripcion",e.descripcion),void 0!==e.texto_boton&&i.append("texto_boton",e.texto_boton),void 0!==e.enlace_boton&&i.append("enlace_boton",e.enlace_boton),void 0!==e.orden&&i.append("orden",String(e.orden)),void 0!==e.activo&&i.append("activo",e.activo?"1":"0"),o instanceof File?(i.append("imagen",o,o.name),console.log("Enviando imagen:",o.name,o.type,o.size)):console.error("La imagen no es un archivo v\xe1lido"),console.log("Campos enviados:"),i.forEach((t,c)=>{console.log(`${c}: ${t}`)});const d=new _.WM;return this.http.post(this.apiUrl,i,{headers:d}).pipe((0,p.U)(t=>t.data),(0,l.K)(t=>(console.error("Error al crear el banner",t),t.error&&t.error.errors&&console.error("Detalles de validaci\xf3n:",t.error.errors),(0,a._)(()=>new Error("Error al crear el banner. Por favor, int\xe9ntelo de nuevo.")))))}updateBanner(e,o,i){if(1===Object.keys(o).length&&"activo"in o)return this.getBannerById(e).pipe((0,g.w)(t=>{const c=new FormData;return c.append("activo",o.activo?"1":"0"),c.append("titulo",t.titulo),c.append("descripcion",t.descripcion||""),c.append("texto_boton",t.texto_boton),c.append("enlace_boton",t.enlace_boton),c.append("orden",String(t.orden)),this.http.post(`${this.adminApiUrl}/${e}`,c).pipe((0,p.U)(E=>E.data),(0,l.K)(E=>(console.error(`Error al actualizar banner con ID ${e}`,E),(0,a._)(()=>new Error("Error al actualizar el banner. Por favor, int\xe9ntelo de nuevo.")))))}),(0,l.K)(t=>(console.error(`Error al obtener banner para actualizar con ID ${e}`,t),(0,a._)(()=>new Error("Error al actualizar el banner. No se pudo obtener la informaci\xf3n completa.")))));const d=new FormData;return Object.keys(o).forEach(t=>{void 0!==o[t]&&d.append(t,"activo"===t&&"boolean"==typeof o[t]?o[t]?"1":"0":String(o[t]))}),i&&d.append("imagen",i,i.name),this.http.post(`${this.adminApiUrl}/${e}`,d).pipe((0,p.U)(t=>t.data),(0,l.K)(t=>(console.error(`Error al actualizar banner con ID ${e}`,t),(0,a._)(()=>new Error("Error al actualizar el banner. Por favor, int\xe9ntelo de nuevo.")))))}deleteBanner(e){return this.http.delete(`${this.apiUrl}/${e}`).pipe((0,l.K)(o=>(console.error(`Error al eliminar banner con ID ${e}`,o),(0,a._)(()=>new Error("Error al eliminar el banner. Por favor, int\xe9ntelo de nuevo.")))))}toggleActivo(e,o){const i=new FormData;return i.append("activo",o?"1":"0"),this.http.post(`${this.adminApiUrl}/${e}`,i).pipe((0,p.U)(d=>d.data),(0,l.K)(d=>(console.error(`Error al cambiar estado del banner con ID ${e}`,d),(0,a._)(()=>new Error("Error al cambiar el estado del banner. Por favor, int\xe9ntelo de nuevo.")))))}static#e=this.\u0275fac=function(o){return new(o||h)(n.LFG(_.eN))};static#r=this.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},1699:(f,v,s)=>{s.d(v,{$:()=>l});var _=s(9212),p=s(2958);let l=(()=>{class a{constructor(){this.apiService=(0,_.f3M)(p.s),this.endpoint="digital-cards"}getDigitalCards(r){const n=new URLSearchParams;r?.page&&n.set("page",r.page.toString()),r?.search&&n.set("search",r.search),r?.user_id&&n.set("user_id",r.user_id),r?.per_page&&n.set("per_page",r.per_page.toString()),r?.status&&n.set("status",r.status),r?.visibility&&n.set("visibility",r.visibility),r?.sort_by&&n.set("sort_by",r.sort_by),r?.sort_order&&n.set("sort_order",r.sort_order);const u=n.toString()?`${this.endpoint}?${n}`:this.endpoint;return console.log("[DEBUG] API URL being called:",u),console.log("[DEBUG] Query params:",n.toString()),this.apiService.get(u)}getDigitalCard(r){return this.apiService.get(`${this.endpoint}/${r}`)}createDigitalCard(r){return this.apiService.post(this.endpoint,r)}updateDigitalCard(r,n){return this.apiService.post(`${this.endpoint}/${r}/update`,n)}deleteDigitalCard(r){return this.apiService.delete(`${this.endpoint}/${r}`)}uploadImage(r,n){const u=new FormData;return u.append("image",n),this.apiService.post(`${this.endpoint}/${r}/upload-image`,u)}deleteImage(r){return this.apiService.delete(`${this.endpoint}/${r}/delete-image`)}toggleStatus(r,n){return this.apiService.post(`${this.endpoint}/${r}/toggle-status`,n)}static#e=this.\u0275fac=function(n){return new(n||a)};static#r=this.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);